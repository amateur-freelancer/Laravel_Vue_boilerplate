(function(e){function t(t){for(var r,a,i=t[0],u=t[1],c=t[2],l=0,p=[];l<i.length;l++)a=i[l],s[a]&&p.push(s[a][0]),s[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);f&&f(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var i=n[a];0!==s[i]&&(r=!1)}r&&(o.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},a={app:0},s={app:0},o=[];function i(e){return u.p+"js/"+({about:"about",page404:"page404",profile:"profile","profile-change-password":"profile-change-password","profile-main-info":"profile-main-info",signin:"signin",signup:"signup"}[e]||e)+"."+{about:"f090a1da",page404:"660b97f1",profile:"bed37b91","profile-change-password":"d6612c4d","profile-main-info":"ad870b99",signin:"59ba9665",signup:"1750e4a6"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={about:1,page404:1,profile:1,"profile-main-info":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise(function(t,n){for(var r="css/"+({about:"about",page404:"page404",profile:"profile","profile-change-password":"profile-change-password","profile-main-info":"profile-main-info",signin:"signin",signup:"signup"}[e]||e)+"."+{about:"4ea05a58",page404:"23d78d50",profile:"43d93af5","profile-change-password":"31d6cfe0","profile-main-info":"4b802b62",signin:"31d6cfe0",signup:"31d6cfe0"}[e]+".css",a=u.p+r,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var i=s[o],c=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(c===r||c===a))return t()}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){i=l[o],c=i.getAttribute("data-href");if(c===r||c===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.request=r,n(s)},p.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(p)}).then(function(){a[e]=0}));var r=s[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise(function(t,n){r=s[e]=[t,n]});t.push(r[2]=o);var c,l=document.getElementsByTagName("head")[0],p=document.createElement("script");p.charset="utf-8",p.timeout=120,u.nc&&p.setAttribute("nonce",u.nc),p.src=i(e),c=function(t){p.onerror=p.onload=null,clearTimeout(f);var n=s[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+r+": "+a+")");o.type=r,o.request=a,n[1](o)}s[e]=void 0}};var f=setTimeout(function(){c({type:"timeout",target:p})},12e4);p.onerror=p.onload=c,l.appendChild(p)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var p=0;p<c.length;p++)t(c[p]);var f=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},2583:function(e,t,n){},"3fd9":function(e,t,n){"use strict";var r=n("ff35"),a=n.n(r);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("96cf");var r=n("3040"),a=(n("cadf"),n("551c"),n("097d"),n("2b0e")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e.loggedIn&&e.tokenExpired?n("div",{staticClass:"d-flex justify-content-center align-items-center h-100"},[n("h1",[e._v("Loading...")])]):n("router-view")],1)},o=[],i=n("c93e"),u=n("2f62"),c={data:function(){return{}},computed:Object(i["a"])({},Object(u["d"])("auth",["user"]),Object(u["c"])("auth",["loggedIn","tokenExpired"]))},l=c,p=(n("7faf"),n("2877")),f=Object(p["a"])(l,s,o,!1,null,null,null);f.options.__file="App.vue";var m=f.exports,h=n("8c4f"),d=n("31bd"),g=n("8afe"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex flex-column",staticStyle:{height:"100%"}},[n("nav",{staticClass:"navbar navbar-expand-lg navbar-light",staticStyle:{"background-color":"#e3f2fd"}},[n("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[e._v("\n      "+e._s(e.appName)+"\n    ")]),e._m(0),n("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarColor03"}},[n("ul",{staticClass:"navbar-nav mr-auto"},[n("li",{staticClass:"nav-item active"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[e._v("\n            Home\n          ")])],1),n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/about"}},[e._v("\n            About\n          ")])],1)]),e.loggedIn?[e._v("\n        Hi, "),n("b",[e._v(e._s(e.user.name))]),e._v(".\n\n        "),n("button",{staticClass:"btn btn-primary btn-sm float-right ml-2",on:{click:function(t){e.$router.push({name:"profile"})}}},[e._v("\n          Profile\n        ")]),n("button",{staticClass:"btn btn-secondary btn-sm float-right ml-2",on:{click:function(t){e.$actionWithLoading(e.logout,"loadingLogout")}}},[e.loadingLogout?n("span",[e._v("\n            Loading...\n          ")]):n("span",[e._v("\n            Logout\n          ")])])]:n("form",{staticClass:"form-inline"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"inputEmail"}},[e._v("\n            Email:\n          ")]),n("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|"+e.$formValidator.rules.email,expression:"'required|' + $formValidator.rules.email"},{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"form-control mx-2",class:{"form-control":!0,"is-invalid":e.errors.has("email")},attrs:{id:"inputEmail","error-messages":e.errors.collect("email"),"data-vv-name":"email",type:"email",placeholder:"Enter email"},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"inputPassword"}},[e._v("\n            Password:\n          ")]),n("input",{directives:[{name:"validate",rawName:"v-validate",value:e.$formValidator.rules.password,expression:"$formValidator.rules.password"},{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],staticClass:"form-control mx-2",class:{"form-control":!0,"is-invalid":e.errors.has("password")},attrs:{id:"inputPassword","data-vv-name":"password",type:"password",placeholder:"Password"},domProps:{value:e.form.password},on:{input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}})]),n("button",{staticClass:"btn btn-primary float-right",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e.loading?n("span",[e._v("\n            Loading...\n          ")]):n("span",[e._v("\n            Sign in\n          ")])]),n("span",{staticClass:"ml-1"},[e._v("\n          or\n          "),n("router-link",{attrs:{to:{name:"signup"}}},[e._v("Sign up")])],1)])],2)]),n("verify-email-alert"),n("div",{staticClass:"container d-flex align-items-center justify-content-center pt-5",staticStyle:{height:"100%"}},[n("transition",{attrs:{name:"router",mode:"out-in"}},[n("router-view")],1)],1)],1)},b=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarColor03","aria-controls":"navbarColor03","aria-expanded":"false","aria-label":"Toggle navigation"}},[n("span",{staticClass:"navbar-toggler-icon"})])}],w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.$auth.user&&!e.$auth.user.hasVerifiedEmail,expression:"$auth.user && !$auth.user.hasVerifiedEmail"}],staticClass:"alert alert-primary mx-auto mt-3",attrs:{role:"alert"}},[e._v("\n  Please, verify your email. We sent a message there.\n  "),n("button",{staticClass:"btn btn-primary btn-sm ml-2",on:{click:e.resendEmailVerification}},[e.loading?n("span",[e._v("\n      Loading...\n    ")]):n("span",[e._v("\n      Resend\n    ")])])])},x=[],y={name:"MainLayoutVerifyEmail",data:function(){return{loading:!1}},methods:Object(i["a"])({resendEmailVerification:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$actionWithLoading(this.resend);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},Object(u["b"])("auth/emailVerification",["resend"]))},k=y,_=(n("3fd9"),Object(p["a"])(k,w,x,!1,null,"6f85c404",null));_.options.__file="VerifyEmail.vue";var E=_.exports,O={name:"MainLayout",components:{VerifyEmailAlert:E},data:function(){return{appName:"Auth(Vue + Laravel)",form:{email:"test@test.com",password:"password"},loading:!1,loadingLogout:!1}},computed:Object(i["a"])({},Object(u["d"])("auth",["user"]),Object(u["c"])("auth",["token","loggedIn"])),methods:Object(i["a"])({submit:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$actionWithLoading(this.signin,"loading",this.form);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},Object(u["b"])("auth",["signin","logout"]))},R=O,j=Object(p["a"])(R,v,b,!1,null,null,null);j.options.__file="Main.vue";var I=j.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-100 h-100"},[n("auth"),n("hr"),n("h2",{staticClass:"mb-4 mt-5 text-center"},[e._v("\n    Users\n  ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.user,expression:"!user"}],staticClass:"alert alert-primary mx-auto w-50",attrs:{role:"alert"}},[e._v("\n    You need to be authorized to view.\n  ")]),n("table",{directives:[{name:"show",rawName:"v-show",value:e.users&&e.loggedIn,expression:"users && loggedIn"}],staticClass:"table"},[e._m(0),n("tbody",e._l(e.users,function(t){return n("tr",{key:t.id},[n("th",{attrs:{scope:"row"}},[e._v(e._s(t.id))]),n("td",[e._v(e._s(t.name))]),n("td",[e._v(e._s(t.email))]),n("td",[e._v(e._s(t.created_at))])])}))]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"text-muted text-center"},[e._v("\n    Loading...\n  ")])],1)},$=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",{staticClass:"thead-light"},[n("tr",[n("th",{attrs:{scope:"col"}},[e._v("id")]),n("th",{attrs:{scope:"col"}},[e._v("Name")]),n("th",{attrs:{scope:"col"}},[e._v("Email")]),n("th",{attrs:{scope:"col"}},[e._v("Created at")])])])}],C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-50 mx-auto clearfix px-5 mb-4"},[n("div",{staticClass:"d-flex justify-content-center mb-3"},[n("router-link",{staticClass:"btn btn-secondary",attrs:{to:{name:"profile"}}},[e._v("\n      Profile(protected route)\n    ")]),n("router-link",{staticClass:"btn btn-secondary ml-2",attrs:{to:{name:"signup"}}},[e._v("\n      Sign up(only guests route)\n    ")]),n("router-link",{staticClass:"btn btn-secondary ml-2",attrs:{to:{name:"signin"}}},[e._v("\n      Sign in(only guests route)\n    ")])],1),n("b",[e._v("Logged in:")]),e._v(" "+e._s(e.loggedIn)+"\n\n  "),n("br"),n("b",[e._v("User: ")]),n("span",{directives:[{name:"show",rawName:"v-show",value:!e.user,expression:"!user"}]},[e._v("–")]),e.user?n("pre",{staticClass:"pl-4"},[e._v(e._s(e.user))]):n("br"),n("b",{staticClass:"mb-2"},[e._v("Token: ")]),e.token?n("span",{attrs:{title:e.token}},[e._v("\n    "+e._s(e.token.slice(0,40)+"...")+"\n  ")]):n("span",[e._v("–")]),n("br"),n("b",[e._v("Token expiration:")]),n("span",{domProps:{innerHTML:e._s(e.tokenExpiresInFormated||" –")}}),n("br"),n("b",[e._v("Refresh token expiration:")]),n("span",{domProps:{innerHTML:e._s(e.refreshTokenExpiresInFormated||" –")}})])},S=[],N={data:function(){return{form:{email:"test@test.com",password:"password"},loading:!1,tokenExpiresInFormated:null,refreshTokenExpiresInFormated:null}},computed:Object(i["a"])({},Object(u["d"])("auth",["token","refreshToken","tokenExpiresIn","refreshTokenExpiresIn","user"]),Object(u["c"])("auth",["loggedIn"])),mounted:function(){Math.floor(Date.now()/1e3),this.setExpiresTime(),setInterval(this.setExpiresTime,1e3)},methods:Object(i["a"])({submit:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.signin(this.form);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](1);case 8:this.loading=!1;case 9:case"end":return e.stop()}},e,this,[[1,6]])}));return function(){return e.apply(this,arguments)}}(),setExpiresTimeByToken:function(e){if(this.loggedIn){var t=this[e+"ExpiresIn"]-Math.floor(Date.now()/1e3),n=Math.abs(t),r="0".concat(Math.floor(n/3600),"h").slice(-3),a="0".concat(Math.floor(n%3600/60),"m").slice(-3),s="0".concat(Math.floor(n%60),"s").slice(-3),o=[r,a,s].join(":");this[e+"ExpiresInFormated"]=t<=0?'<span style="color: red"> token expired '.concat(o.slice(1)," ago.</span>"):o}else this[e+"ExpiresInFormated"]=null},setExpiresTime:function(){this.setExpiresTimeByToken("token"),this.setExpiresTimeByToken("refreshToken")}},Object(u["b"])("auth",["signin"]))},L=N,P=Object(p["a"])(L,C,S,!1,null,null,null);P.options.__file="Auth.vue";var U=P.exports,A={name:"Home",components:{Auth:U},data:function(){return{users:[],loading:!1}},computed:Object(i["a"])({},Object(u["d"])("auth",["user"]),Object(u["c"])("auth",["loggedIn"])),watch:{loggedIn:function(e){e&&this.fetchUsers()}},mounted:function(){this.loggedIn&&this.fetchUsers()},methods:{fetchUsers:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$get("users");case 3:this.users=e.sent,this.loading=!1;case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},M=A,V=Object(p["a"])(M,T,$,!1,null,null,null);V.options.__file="Home.vue";var D,q=V.exports,H=[{name:"signup",path:"/signup",component:function(){return n.e("signup").then(n.bind(null,"5794"))},meta:{guest:!0}},{name:"signin",path:"/signin",component:function(){return n.e("signin").then(n.bind(null,"a50e"))},meta:{guest:!0}},{name:"forgot-password",path:"/forgot-password",component:function(){return n.e("signin").then(n.bind(null,"66e9"))},meta:{guest:!0}},{name:"reset-password",path:"/reset-password/:token/:email",component:function(){return n.e("signin").then(n.bind(null,"6127"))},meta:{guest:!0}},{name:"verify-email",path:"/verify-email",component:function(){return n.e("signin").then(n.bind(null,"9b60"))}}],B=[{path:"/profile",component:function(){return n.e("profile").then(n.bind(null,"4bf6"))},children:[{name:"profile",path:"",component:function(){return n.e("profile-main-info").then(n.bind(null,"2c8e"))},meta:{auth:!0}},{name:"profile-change-password",path:"/change-password",component:function(){return n.e("profile-change-password").then(n.bind(null,"2fff"))},meta:{auth:!0}}]}],F=[{name:"about",path:"/about",component:function(){return n.e("about").then(n.bind(null,"a1d1"))}}],G=[{path:"/",component:I,children:[{name:"home",path:"",component:q}].concat(Object(g["a"])(H),Object(g["a"])(B),Object(g["a"])(F),[{path:"*",component:function(){return n.e("page404").then(n.bind(null,"ee5d"))}}])}],W=n("0759"),J=n.n(W),K=n("a322"),X=a["a"].prototype,z="USER",Y="USER_LOGGED_IN",Q="USER_LOGGED_OUT",Z="TOKEN",ee="REFRESH_TOKEN_EXPIRED",te={namespaced:!0,state:{},mutations:{},actions:{sendEmail:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,s,o,i,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.dispatch,t.commit,r=we.resolve({name:"reset-password",params:{token:"<token>",email:"<email>"}}),a=r.href,s=location.port?":"+location.port:"",o=location.protocol+"//"+location.hostname+s+a,e.next=6,X.$post("auth/forgot-password-email",{email:n,resetUrl:o});case 6:i=e.sent,u=i.message,X.$notify.success(u);case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),resetPassword:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,t.commit,e.next=3,X.$post("auth/forgot-password-reset",n);case 3:return a=e.sent,a.showMsg=!1,e.next=7,r("auth/loggedIn",a,{root:!0});case 7:X.$notify.success("Password has been reset successfully!");case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}},ne={namespaced:!0,state:{},mutations:{},actions:{resend:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.dispatch,t.commit,e.next=3,X.$post("auth/email/resend");case 3:n=e.sent,X.$notify.success(n);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),verify:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,s,o,i,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,t.commit,e.prev=1,e.next=4,X.$post(n);case 4:a=e.sent,s=a.message,o=a.user,r("auth/setUser",o,{root:!0}),X.$notify.success(s),we.push({name:"profile"}),e.next=18;break;case 12:e.prev=12,e.t0=e["catch"](1),i=e.t0.response,u=i.status,i.message,401===u?we.push({name:"signin"}):429===u&&we.push({name:"profile"});case 18:case"end":return e.stop()}},e,this,[[1,12]])}));return function(t,n){return e.apply(this,arguments)}}()}},re={user:"auth__user",token:"auth__token",tokenExpiresIn:"auth__tokenExpiresIn",refreshTokenExpiresIn:"auth__refreshTokenExpiresIn"},ae=50,se="auth/",oe=null,ie={namespaced:!0,modules:{forgotPassword:te,emailVerification:ne},state:{user:JSON.parse(localStorage.getItem(re.user)),token:localStorage.getItem(re.token),tokenExpiresIn:+localStorage.getItem(re.tokenExpiresIn),refreshTokenExpiresIn:+localStorage.getItem(re.refreshTokenExpiresIn),refreshTokenAlreadyExpired:!1},mutations:(D={},Object(K["a"])(D,z,function(e,t){return e.user=t,localStorage.setItem(re.user,JSON.stringify(t)),t}),Object(K["a"])(D,Z,function(e,t){console.log("token_global",t),e.token=t&&t.accessToken||"",e.tokenExpiresIn=+(t&&t.expiresIn)||"",e.refreshTokenExpiresIn=+(t&&t.refreshTokenExpiresIn)||"",localStorage.setItem(re.token,e.token),localStorage.setItem(re.tokenExpiresIn,e.tokenExpiresIn),localStorage.setItem(re.refreshTokenExpiresIn,e.refreshTokenExpiresIn)}),Object(K["a"])(D,ee,function(e){e.refreshTokenAlreadyExpired||(e.refreshTokenAlreadyExpired=!0,le(),pe())}),Object(K["a"])(D,Y,function(e){e.refreshTokenAlreadyExpired=!1,me.state.route.meta.guest&&we.push({name:"profile"}),ce(e)}),Object(K["a"])(D,Q,function(e,t){le(),me.state.route.meta.auth&&we.push({name:"signin"}),me.state.route.meta.guest&&we.push("/")}),D),actions:{signin:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,t.commit,e.next=3,X.$post("auth/signin",n);case 3:return a=e.sent,e.next=6,r("loggedIn",a);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),signup:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,t.commit,e.next=3,X.$post("auth/signup",n);case 3:return a=e.sent,a.showMsg=!1,e.next=7,r("loggedIn",a);case 7:X.$notify.success("Registered successfully!");case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),loggedIn:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,s,o,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.dispatch,r=t.commit,a=n.user,s=n.tokenInfo,o=n.showMsg,i=void 0===o||o,r(Z,s),r(z,a),r(Y),i&&X.$notify.success("logged in successfully!");case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getUser:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,X.$get("auth/user");case 3:return r=e.sent,a=r.user,e.abrupt("return",n(z,a));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),logout:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,r=t.commit,e.next=3,X.$post("auth/logout");case 3:return e.next=5,n("setNullTokenAndUser");case 5:r(Q,!0),X.$notify.success("Logged out successfully.");case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),refresh:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,r=t.commit,a=t.state,e.next=3,X.$post("auth/refresh");case 3:if(s=e.sent,"tokenAlreadyRefreshed"!==s.status){e.next=6;break}return e.abrupt("return");case 6:if("refreshTokenExpired"!==s.status){e.next=10;break}return e.next=9,n("refreshTokenExpired");case 9:return e.abrupt("return");case 10:r(Z,s),ce(a);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),refreshTokenExpired:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,r=t.commit,e.next=3,n("setNullTokenAndUser");case 3:r(ee),r(Q,!1);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),setNullUser:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n(z,null);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),setNullTokenAndUser:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n(Z,null),n(z,null);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),setUser:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=t.commit,r(z,n);case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),init:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.state,ce(n);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},getters:{loggedIn:function(e){return!!e.user},tokenNeedToRefresh:function(e){var t=e.tokenExpiresIn-ae,n=Math.floor(Date.now()/1e3);return e.token&&t<n},tokenExpired:function(e){return e.tokenExpiresIn<Math.floor(Date.now()/1e3)}}},ue=ie;function ce(e){var t=e.token,n=e.tokenExpiresIn;if(t){var a=Date.now()/1e3,s=n-a-ae,o=s>0?1e3*s:0;clearTimeout(oe),oe=setTimeout(Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,me.dispatch(se+"refresh");case 2:case"end":return e.stop()}},e,this)})),o)}}function le(){clearTimeout(oe)}function pe(){X.$notify.info("Please, log in again")}var fe={namespaced:!0,state:{},mutations:{},actions:{setPassword:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,t.commit,e.next=3,X.$post("profile/current/set-password",n);case 3:a=e.sent,s=a.message,o=a.user,r("auth/setUser",o,{root:!0}),X.$notify.success(s);case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}};a["a"].use(u["a"]);var me=new u["a"].Store({plugins:[J()({predicate:["auth/USER","auth/TOKEN","auth/REFRESH_TOKEN_EXPIRED","auth/USER_LOGGED_IN","auth/USER_LOGGED_OUT"]})],modules:{auth:ue,profile:fe},state:{},mutations:{},actions:{}});function he(e){e.beforeEach(function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n,r){var a,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=me.state.auth.token,s=me.state.auth.user,o=me.getters["auth/tokenNeedToRefresh"],e.prev=3,e.t0=!s&&a&&!o,!e.t0){e.next=8;break}return e.next=8,me.dispatch("auth/getUser");case 8:e.next=13;break;case 10:e.prev=10,e.t1=e["catch"](3),console.error(e.t1);case 13:!a&&s&&me.dispatch("auth/setNullUser"),r();case 15:case"end":return e.stop()}},e,this,[[3,10]])}));return function(t,n,r){return e.apply(this,arguments)}}())}function de(e){e.beforeEach(function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n,r){var a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.matched.some(function(e){return e.meta.auth}),s=me.state.auth.user,!a||s){e.next=6;break}return r({name:"signin"}),X.$notify.error("This page requires authentication!"),e.abrupt("return");case 6:r();case 7:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}())}function ge(e){e.beforeEach(function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n,r){var a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.matched.some(function(e){return e.meta.guest}),s=me.state.auth.user,!a||!s){e.next=6;break}return n.fullPath?r(!1):r({name:"home"}),X.$notify.error("This page is for guests only!"),e.abrupt("return");case 6:r();case 7:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}())}var ve=function(e){he(e),de(e),ge(e)};a["a"].use(h["a"]);var be=new h["a"]({mode:"history",base:"/",routes:G});Object(d["sync"])(me,be),ve(be);var we=be,xe=(n("2583"),n("bc3a")),ye=n.n(xe),ke=n("0987"),_e=(n("ac4d"),n("8a81"),n("ac6a"),n("7bb1")),Ee={name:"required|alpha_spaces|max:30",email:"email",password:"required|min:5"},Oe=new _e["a"](Ee),Re=function(e){var t=e.data,n=t.errors,r="";if(n){for(var a in n)if(n.hasOwnProperty(a)){var s=!0,o=!1,i=void 0;try{for(var u,c=n[a][Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var l=u.value;r+="".concat(l,"<br>")}}catch(e){o=!0,i=e}finally{try{s||null==c.return||c.return()}finally{if(o)throw i}}}}else r=t.message;X.$notify.error(r)},je="http://localhost:8000/api/";a["a"].use(ke["a"],{axios:ye.a,config:{baseURL:je,headers:{"X-Requested-With":"XMLHttpRequest"}},interceptors:{beforeRequest:function(e,t){if(e.baseURL===je){var n=me.state.auth.token;n&&(e.headers.Authorization="Bearer ".concat(n))}return e},beforeResponseError:function(e){var t=e.response,n=e.message;t?Re(t):n&&X.$notify.error(n)}}});n("ab8b");var Ie=n("e440"),Te=n.n(Ie),$e=n("2685"),Ce=n.n($e);n("6705");function Se(e){var t=e.title,n=e.message,r=e.type,a=e.timeout;e.cb;return r===Te.a.types.warn&&(r="warning"),Ce.a[r]({title:t,message:n,timeout:a})}var Ne={success:Se,error:Se,info:Se,warn:Se},Le={},Pe=function(e){Le[e]=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.timeout,s=void 0===a?3e3:a;Se({type:e,title:t,message:n,timeout:s})}};for(var Ue in Ne)Pe(Ue);a["a"].use(Te.a,Ne),a["a"].prototype.$notify=Le,a["a"].use(_e["b"]),a["a"].prototype.$formValidator={rules:Ee,validate:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.validator.validateAll(t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),validator:Oe},a["a"].config.productionTip=!1,a["a"].prototype.$auth={get user(){return me.state.auth.user},get loggedIn(){return me.getters["auth/loggedIn"]}},a["a"].prototype.$actionWithLoading=function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,s,o=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(n=o.length>1&&void 0!==o[1]?o[1]:"loading",this[n]=!0,e.prev=2,r=o.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=o[s];return e.next=6,t.apply(void 0,a);case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](2),e.t0;case 11:return e.prev=11,this[n]=!1,e.finish(11);case 14:case"end":return e.stop()}},e,this,[[2,8,11,14]])}));return function(t){return e.apply(this,arguments)}}(),new a["a"]({router:we,store:me,render:function(e){return e(m)}}).$mount("#app"),me.dispatch("auth/init")},5917:function(e,t,n){},"7faf":function(e,t,n){"use strict";var r=n("5917"),a=n.n(r);a.a},ff35:function(e,t,n){}});
//# sourceMappingURL=app.b43b0fd5.js.map